{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lenovo\\Desktop\\chatapp\\src\\components\\Home\\Friends.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\src\\components\\Home\\Friends.vue","mtime":1576182774004},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOlxcVXNlcnNcXGxlbm92b1xcRGVza3RvcFxcY2hhdGFwcFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0RnJpZW5kTmV3cywgcmVwbHkgfSBmcm9tICJAL2FwaS9mcmllbmQiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZnJpZW5kcyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdGl2ZU5hbWU6ICJhIiwKICAgICAgbGlzdDogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogdHJ1ZSwKICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgZGF0YTogW10sCiAgICAgIGZyaWVuZExvYWRpbmc6IGZhbHNlLAogICAgICBGcmllbmRGaW5pc2hlZDogZmFsc2UsCiAgICAgIGlzUmVmcmVzaDogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbIl9pZCIsICJ1c2VySW5mbyJdKSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TmV3cygpOwogIH0sCiAgbWV0aG9kczogewogICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZWNsaWNrOiBmdW5jdGlvbiBoYW5kbGVjbGljayhzdGF0dXMsIGluZGV4KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaWQgPSB0aGlzLmRhdGFbaW5kZXhdLl9pZDsKICAgICAgcmVwbHkoewogICAgICAgIHN0YXR1czogc3RhdHVzLAogICAgICAgIGlkOiBpZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy5nZXROZXdzKCk7CgogICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRVc2VySW5mbyIpOwoKICAgICAgICAgIHJldHVybiBfdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIF90aGlzLiRub3RpZnkocmVzLmRhdGEubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldE5ld3M6IGZ1bmN0aW9uIGdldE5ld3MoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5mcmllbmRMb2FkaW5nID0gdHJ1ZTsKICAgICAgZ2V0RnJpZW5kTmV3cygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5kYXRhID0gcmVzLmRhdGEuZGF0YTsKICAgICAgICBfdGhpczIuZnJpZW5kTG9hZGluZyA9IGZhbHNlOwogICAgICAgIF90aGlzMi5GcmllbmRGaW5pc2hlZCA9IHRydWU7CiAgICAgIH0pOwogICAgfSwKICAgIGNoYXQ6IGZ1bmN0aW9uIGNoYXQoaW5kZXgpIHsKICAgICAgdmFyIGZyb20gPSB0aGlzLl9pZDsKICAgICAgdmFyIHRvID0gdGhpcy51c2VySW5mby5mcmllbmRzW2luZGV4XS5faWQ7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiY2hhdG9uZSIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBmcm9tOiBmcm9tLAogICAgICAgICAgdG86IHRvLAogICAgICAgICAgZnJpZW5kOiB0aGlzLnVzZXJJbmZvLmZyaWVuZHNbaW5kZXhdCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvblJlZnJlc2g6IGZ1bmN0aW9uIG9uUmVmcmVzaCgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLmdldE5ld3MoKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFVzZXJJbmZvIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMzLmlzUmVmcmVzaCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Friends.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,SAAA,aAAA,EAAA,KAAA,QAAA,cAAA;AAEA,SAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,GADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA,IAJA;AAKA,MAAA,MAAA,EAAA,KALA;AAMA,MAAA,IAAA,EAAA,EANA;AAOA,MAAA,aAAA,EAAA,KAPA;AAQA,MAAA,cAAA,EAAA,KARA;AASA,MAAA,SAAA,EAAA;AATA,KAAA;AAWA,GAdA;AAeA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,KAAA,EAAA,UAAA,CAAA,CADA,CAfA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,SAAA,OAAA;AACA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,KAHA;AAIA,IAAA,WAJA,uBAIA,MAJA,EAIA,KAJA,EAIA;AAAA;;AACA,UAAA,EAAA,GAAA,KAAA,IAAA,CAAA,KAAA,EAAA,GAAA;AACA,MAAA,KAAA,CAAA;AAAA,QAAA,MAAA,EAAA,MAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,aAAA;;AACA,iBAAA,KAAA,CAAA,OAAA,CAAA;AAAA,YAAA,IAAA,EAAA,SAAA;AAAA,YAAA,OAAA,EAAA,GAAA,CAAA,IAAA,CAAA;AAAA,WAAA,CAAA;AACA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAPA;AAQA,KAdA;AAeA,IAAA,OAfA,qBAeA;AAAA;;AACA,WAAA,aAAA,GAAA,IAAA;AACA,MAAA,aAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,aAAA,GAAA,KAAA;AACA,QAAA,MAAA,CAAA,cAAA,GAAA,IAAA;AACA,OAJA;AAKA,KAtBA;AAuBA,IAAA,IAvBA,gBAuBA,KAvBA,EAuBA;AACA,UAAA,IAAA,GAAA,KAAA,GAAA;AACA,UAAA,EAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,KAAA,EAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,SADA;AAEA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,EAAA,EAAA,EAFA;AAGA,UAAA,MAAA,EAAA,KAAA,QAAA,CAAA,OAAA,CAAA,KAAA;AAHA;AAFA,OAAA;AAQA,KAlCA;AAmCA,IAAA,SAnCA,uBAmCA;AAAA;;AACA,WAAA,OAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,aAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,KAAA;AACA,OAFA;AAGA;AAxCA;AArBA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <van-pull-refresh v-model=\"isRefresh\" @refresh=\"onRefresh\">\r\n      <van-cell id=\"title1\" title=\"New Friend\" value=\">\" size=\"large\" @click=\"show\" />\r\n      <div style=\"height: 80vh;\"><!--查看自己的好友-->\r\n        <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"No more\">\r\n          <van-cell id=\"chatfriend\" v-for=\"(item,index) in userInfo.friends\" :key=\"item+index\" @click=\"chat(index)\">//点击头像聊天\r\n            <van-image fit=\"cover\" round width=\"40px\" height=\"40px\" :src=\"item.avatar\" slot=\"icon\" />\r\n            <span id=\"friendnick\" slot=\"title\" style=\"margin-left:16px;\">{{item.nickName}}</span>\r\n            <span id=\"friendsignature\" slot=\"label\" style=\"margin-left:16px;\">{{item.signature}}</span>\r\n          </van-cell>\r\n        </van-list>\r\n      </div>\r\n      <van-popup v-model=\"isShow\" position=\"bottom\" style=\"height:100%;width:100%;\">\r\n        <van-nav-bar id=\"newfriendclick\" title=\"New Friendsss\" left-arrow @click-left=\"isShow = false\" />\r\n        <van-list v-model=\"friendLoading\" :finished=\"FriendFinished\" finished-text=\"No more\">\r\n          <van-cell v-for=\"(item,index) in data\" :key=\"index\">\r\n            <van-image\r\n              id=\"friendinfo\"\r\n              fit=\"cover\"\r\n              round\r\n              width=\"40px\"\r\n              height=\"40px\"\r\n              :src=\"_id===item.to._id? item.from.avatar: item.to.avatar\"\r\n              slot=\"icon\"\r\n            />\r\n            <span\r\n              id=\"nickname\"\r\n              slot=\"title\"\r\n              style=\"margin-left:16px;\"\r\n            >{{_id===item.to._id? item.from.nickName: item.to.nickName}}</span>\r\n            <div slot=\"label\" style=\"margin-left:16px;display: flex;justify-content:space-between\">\r\n              <div id=\"message\">{{item.message}}</div>\r\n              <div v-if=\"!(_id === item.to.id) \">\r\n                <div v-if=\"item.status === 0\">\r\n                  <van-button\r\n                    id=\"butaccept\"\r\n                    size=\"small\"\r\n                    type=\"info\"\r\n                    style=\"maring-right: 5px;\"\r\n                    @click=\"handleclick(1,index)\"\r\n                  >Accept</van-button>\r\n                  <van-button id=\"butrefuse\" size=\"small\" type=\"danger\" @click=\"handleclick(2,index)\">Refuse</van-button>\r\n                </div>\r\n                <div>\r\n                  <span id=\"accpted1\">{{item.status === 1?'Accepted':'Refused'}}</span>\r\n                </div>\r\n              </div>\r\n              <div v-if=\"(_id === item.to.id)\">\r\n                <span id=\"accept2\">{{item.status ===0?'Loading':item.status === 1?'Accepted':'Refused'}}</span>\r\n              </div>\r\n            </div>\r\n            <div\r\n              v-if=\"!(_id === item.to.id)\"\r\n              slot=\"label\"\r\n              style=\"margin-left:16px;\"\r\n            >Source：{{item.source}}</div>\r\n          </van-cell>\r\n        </van-list>\r\n      </van-popup>\r\n    </van-pull-refresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getFriendNews, reply } from \"@/api/friend\";\r\n\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n  name: \"friends\",\r\n  data() {\r\n    return {\r\n      activeName: \"a\",\r\n      list: [],\r\n      loading: false,\r\n      finished: true,\r\n      isShow: false,\r\n      data: [],\r\n      friendLoading: false,\r\n      FriendFinished: false,\r\n      isRefresh: false\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"_id\", \"userInfo\"])\r\n  },\r\n  created() {\r\n    this.getNews();\r\n  },\r\n  methods: {\r\n    show() {\r\n      this.isShow = true;\r\n    },\r\n    handleclick(status, index) {\r\n      let id = this.data[index]._id;\r\n      reply({ status, id }).then(res => {\r\n        if (res.status === 200) {\r\n          this.getNews();\r\n          this.$store.dispatch(\"getUserInfo\");\r\n          return this.$notify({ type: \"success\", message: res.data.message });\r\n        }\r\n        this.$notify(res.data.message);\r\n      });\r\n    },\r\n    getNews() {\r\n      this.friendLoading = true;\r\n      getFriendNews().then(res => {\r\n        this.data = res.data.data;\r\n        this.friendLoading = false;\r\n        this.FriendFinished = true;\r\n      });\r\n    },\r\n    chat(index) {\r\n      let from = this._id;\r\n      let to = this.userInfo.friends[index]._id;\r\n      this.$router.push({\r\n        name: \"chatone\",\r\n        params: {\r\n          from,\r\n          to,\r\n          friend: this.userInfo.friends[index]\r\n        }\r\n      });\r\n    },\r\n    onRefresh() {\r\n      this.getNews();\r\n      this.$store.dispatch(\"getUserInfo\").then(res => {\r\n        this.isRefresh = false;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>"],"sourceRoot":"src/components/Home"}]}