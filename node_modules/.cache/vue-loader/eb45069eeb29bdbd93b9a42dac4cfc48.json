{"remainingRequest":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\lenovo\\Desktop\\chatapp\\src\\components\\Home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\src\\components\\Home\\Home.vue","mtime":1576181518960},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lenovo\\Desktop\\chatapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7DQppbXBvcnQgeyBzZWFyY2gsIGFkZFBlcnNvbix1cGxvYWQgfSBmcm9tICJAL2FwaS91c2VyIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImhvbWUiLA0KICBjcmVhdGVkKCkgew0KICAgIGlmICh0aGlzLnRva2VuICYmICF0aGlzLmhhc0dldEluZm8pIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRVc2VySW5mbyIpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy4kc29ja2V0LmVtaXQoImxvZ2luIiwgew0KICAgICAgICAgIHVzZXJJZDogcmVzLmRhdGEuZGF0YS5faWQNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICB9IGVsc2UgaWYgKCF0aGlzLnRva2VuKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIG5hbWU6ICJib290Ig0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcEdldHRlcnMoWyJ1c2VySW5mbyIsICJoYXNHZXRJbmZvIiwgInRva2VuIl0pDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjdGl2ZTogdGhpcy4kcm91dGUubmFtZSwNCiAgICAgIHNlYXJjaFZhbHVlOiAiIiwNCiAgICAgIHNlYXJjaFBlcnNvbjogIiIsDQogICAgICBzZWFyY2hHcm91cDogIiIsDQogICAgICByaWdodFNob3c6IGZhbHNlLA0KICAgICAgc2VhcmNoVHlwZTogInBlcnNvbiIsDQogICAgICBsZWZ0U2hvdzogZmFsc2UsDQogICAgICBpbmZvOiB7DQogICAgICAgIG5pY2tOYW1lOiAiIiwNCiAgICAgICAgc2V4OiAibWFsZSIsDQogICAgICAgIGFnZTogIiIsDQogICAgICAgIGZhdm9yOiAiIiwNCiAgICAgICAgc2lnbmF0dXJlOiAiIg0KICAgICAgfSwNCiAgICAgIGRpc2FibGVkOiB0cnVlLA0KICAgICAgc2hvdzogZmFsc2UsDQogICAgICBwZXJzb25JbmZvOiB7DQogICAgICAgIG5pY2tOYW1lOiAiIiwNCiAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICBhZ2U6ICIiLA0KICAgICAgICBmYXZvcjogIiIsDQogICAgICAgIHNpZ25hdHVyZTogIiIsDQogICAgICAgIF9pZDogIiINCiAgICAgIH0sDQogICAgICBzZWFyY2hTaG93OiBmYWxzZQ0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKFsidXBkYXRlZFVzZXJJbmZvIl0pLA0KICAgIHJpZ2h0KCkgew0KICAgICAgdGhpcy5yaWdodFNob3cgPSB0cnVlOw0KICAgIH0sDQogICAgbGVmdCgpIHsNCiAgICAgIHRoaXMuaW5mbyA9IHRoaXMudXNlckluZm87DQogICAgICB0aGlzLmxlZnRTaG93ID0gdHJ1ZTsNCiAgICB9LA0KICAgIG9uU2VhcmNoUGVyc29uKCkgew0KICAgICAgc2VhcmNoKHRoaXMuc2VhcmNoUGVyc29uKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMucGVyc29uSW5mbyA9IHJlcy5kYXRhLmRhdGE7DQogICAgICAgIHRoaXMuc2VhcmNoU2hvdyA9IHRydWU7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFkZCgpIHsNCiAgICAgICAgbGV0IG9iaiA9IHsNCiAgICAgICAgICB0bzogdGhpcy5wZXJzb25JbmZvLl9pZCwNCiAgICAgICAgICBtZXNzYWdlOiAiQXBwbHkgdG8gYWRkIHlvdSBhcyBhIGZyaWVuZCIsDQogICAgICAgICAgc291cmNlOiAiRW1haWwgc2VhcmNoIg0KICAgICAgICB9Ow0KICAgICAgICBhZGRQZXJzb24ob2JqKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy4kbm90aWZ5KHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiByZXMuZGF0YS5tZXNzYWdlIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHNhdmUoKSB7DQogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHsNCiAgICAgICAgdGhpcy51cGRhdGVkVXNlckluZm8odGhpcy5pbmZvKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy4kbm90aWZ5KHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAiU3VjY2VzcyIgfSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgdGhpcy5kaXNhYmxlZCA9ICF0aGlzLmRpc2FibGVkOw0KICAgIH0sDQogICAgYWZ0ZXJSZWFkKGZpbGUpew0KICAgICAgbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTsNCsKgwqDCoMKgwqAgZGF0YS5hcHBlbmQoImF2YXRhciIsIGZpbGUuZmlsZSk7DQogICAgICB1cGxvYWQoZGF0YSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ2V0VXNlckluZm8nKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIExvZ291dCgpew0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2hhbmRsZUxvZ091dCcpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCkNCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgICRyb3V0ZSh2YWwpIHsNCiAgICAgIHRoaXMuYWN0aXZlID0gdmFsLm5hbWU7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/components/Home","sourcesContent":["<template>\r\n  <div style=\"width:100%;height:100%;overflow: hidden;\">\r\n    <div style=\"height: 8%\">\r\n      <van-nav-bar :title=\"active\" @click-right=\"right\" @click-left=\"left\" class=\"bar\"><!--点击头像改数据-->\r\n        <van-icon id=\"plus\" name=\"plus\" slot=\"right\" />\r\n        <div slot=\"left\" style=\"top: 0\">\r\n          <van-image\r\n            id=\"clickavatar\"\r\n            fit=\"cover\"\r\n            round\r\n            width=\"40px\"\r\n            height=\"40px\"\r\n            :src=\"userInfo.avatar\"\r\n          />\r\n        </div>\r\n      </van-nav-bar>\r\n    </div>\r\n    <router-view style=\"height: 80%;\"></router-view>\r\n    <van-popup id=\"rightshow\"v-model=\"rightShow\" position=\"right\" style=\"height:100%;width:100%;\">\r\n      <van-nav-bar id=\"addshow\" title=\"Add\" left-arrow @click-left=\"rightShow = false\" />\r\n        <van-search\r\n            id=\"email\"\r\n            v-model=\"searchPerson\"\r\n            shape=\"round\"\r\n            placeholder=\"Please enter Emali to find friend\"\r\n            background=\"#F0F3F6\"\r\n            @search=\"onSearchPerson\"\r\n        />\r\n        <van-panel title=\"UserInfo\" v-show=\"searchShow\">\r\n          <div style=\"font-size:16px\">\r\n            <p>\r\n              <span id=\"nickname\">NickName:</span>\r\n              {{personInfo.nickName}}\r\n            </p>\r\n            <p>\r\n              <span id=\"age\">Age:</span>\r\n              {{personInfo.age}}\r\n            </p>\r\n            <p>\r\n              <span id=\"sex\">Sex:</span>\r\n              {{personInfo.sex}}\r\n            </p>\r\n            <p>\r\n              <span id=\"favor\">Favor:</span>\r\n              {{personInfo.favor}}\r\n            </p>\r\n            <p>\r\n              <span id=\"signature\">Signature:</span>\r\n              {{personInfo.signature}}\r\n            </p>\r\n          </div>\r\n          <div slot=\"footer\"><!--添加好友-->\r\n            <van-button id=\"addUser\" size=\"large\" type=\"info\" @click=\"add\">Add User</van-button>\r\n          </div>\r\n        </van-panel>\r\n\r\n    </van-popup>\r\n    <van-popup v-model=\"leftShow\" position=\"left\" style=\"height:100%;width:100%;\">\r\n      <van-nav-bar :title=\"userInfo.nickName\" left-arrow @click-left=\"leftShow = false\" /><!--点击名字-->\r\n      <div style=\"text-align: center;width:100%;\">\r\n        <van-uploader :after-read=\"afterRead\">\r\n          <van-image id=\"useravator\" width=\"150\" fit=\"contain\" :src=\"userInfo.avatar\" /><!--点击头像-->\r\n        </van-uploader>\r\n      </div>\r\n      <van-cell-group>\r\n        <van-field id=\"nickname1\" label=\"NickName\" v-model=\"info.nickName\" :disabled=\"disabled\" />\r\n        <van-cell id=\"sex1\" title=\"Sex\" clickable @click=\"radio = '1'\">\r\n          <van-radio-group\r\n            id=\"selectsex\"\r\n            v-model=\"info.sex\"\r\n            style=\"display:flex;font-size: 16px; justify-content: space-around;\"\r\n            :disabled=\"disabled\"\r\n          >\r\n            <van-radio id=\"male1\" name=\"male\">male</van-radio>\r\n            <van-radio id=\"female1\" name=\"female\">female</van-radio>\r\n          </van-radio-group>\r\n        </van-cell>\r\n        <van-field\r\n          id=\"age1\"\r\n          label=\"Age\"\r\n          v-model=\"info.age\"\r\n          :disabled=\"disabled\"\r\n        />\r\n        <van-field id=\"favor1\" label=\"Favor\" v-model=\"info.favor\" :disabled=\"disabled\" />\r\n        <van-field id=\"signature1\" label=\"signature\" v-model=\"info.signature\" :disabled=\"disabled\" />\r\n        <van-button\r\n          id=\"save\"\r\n          style=\"width:100%;margin-top: 16px;\"\r\n          type=\"info\"\r\n          @click=\"save\"\r\n        >{{!disabled?'Save':'Edit'}}</van-button>\r\n        <van-button\r\n         id=\"logout\"\r\n        style=\"width:100%;margin-top: 16px;\"\r\n          type=\"info\"\r\n          @click=\"Logout\"\r\n          >\r\n          Logout\r\n        </van-button>\r\n      </van-cell-group>\r\n    </van-popup>\r\n    <van-tabbar v-model=\"active\">\r\n      <van-tabbar-item id=\"message\" name=\"Message\" to=\"message\" icon=\"chat\">Message</van-tabbar-item>\r\n      <van-tabbar-item id=\"friends\" name=\"Friends\" to=\"friends\" icon=\"friends\">Friends</van-tabbar-item>\r\n      <van-tabbar-item id=\"dynamic\" name=\"Dynamic\" to=\"article\" icon=\"star\">Dynamic</van-tabbar-item>\r\n    </van-tabbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport { search, addPerson,upload } from \"@/api/user\";\r\nexport default {\r\n  name: \"home\",\r\n  created() {\r\n    if (this.token && !this.hasGetInfo) {\r\n      this.$store.dispatch(\"getUserInfo\").then(res => {\r\n        this.$socket.emit(\"login\", {\r\n          userId: res.data.data._id\r\n        });\r\n      });\r\n    } else if (!this.token) {\r\n      this.$router.push({\r\n        name: \"boot\"\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"userInfo\", \"hasGetInfo\", \"token\"])\r\n  },\r\n  data() {\r\n    return {\r\n      active: this.$route.name,\r\n      searchValue: \"\",\r\n      searchPerson: \"\",\r\n      searchGroup: \"\",\r\n      rightShow: false,\r\n      searchType: \"person\",\r\n      leftShow: false,\r\n      info: {\r\n        nickName: \"\",\r\n        sex: \"male\",\r\n        age: \"\",\r\n        favor: \"\",\r\n        signature: \"\"\r\n      },\r\n      disabled: true,\r\n      show: false,\r\n      personInfo: {\r\n        nickName: \"\",\r\n        email: \"\",\r\n        age: \"\",\r\n        favor: \"\",\r\n        signature: \"\",\r\n        _id: \"\"\r\n      },\r\n      searchShow: false\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions([\"updatedUserInfo\"]),\r\n    right() {\r\n      this.rightShow = true;\r\n    },\r\n    left() {\r\n      this.info = this.userInfo;\r\n      this.leftShow = true;\r\n    },\r\n    onSearchPerson() {\r\n      search(this.searchPerson).then(res => {\r\n        this.personInfo = res.data.data;\r\n        this.searchShow = true;\r\n      });\r\n    },\r\n    add() {\r\n        let obj = {\r\n          to: this.personInfo._id,\r\n          message: \"Apply to add you as a friend\",\r\n          source: \"Email search\"\r\n        };\r\n        addPerson(obj).then(res => {\r\n          this.$notify({ type: \"success\", message: res.data.message });\r\n        });\r\n    },\r\n    save() {\r\n      if (!this.disabled) {\r\n        this.updatedUserInfo(this.info).then(res => {\r\n          this.$notify({ type: \"success\", message: \"Success\" });\r\n        });\r\n      }\r\n      this.disabled = !this.disabled;\r\n    },\r\n    afterRead(file){\r\n      let data = new FormData();\r\n      data.append(\"avatar\", file.file);\r\n      upload(data).then(res => {\r\n        this.$store.dispatch('getUserInfo')\r\n      })\r\n    },\r\n    Logout(){\r\n      this.$store.dispatch('handleLogOut').then(res => {\r\n        location.reload()\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    $route(val) {\r\n      this.active = val.name;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped lang=\"less\">\r\n.bar .van-nav-bar__left {\r\n  top: 10px;\r\n}\r\n</style>"]}]}